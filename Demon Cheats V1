local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- à¸ªà¸£à¹‰à¸²à¸‡ Window
local Window = Rayfield:CreateWindow({
   Name = "Demon Cheats V3",
   Icon = nil,
   LoadingTitle = "Welcome to Demon Cheats!",
   LoadingSubtitle = "Demon Cheats team",
   ShowText = "Rayfield",
   Theme = "DarkBlue",
   ToggleUIKeybind = "K",
   DisableRayfieldPrompts = true,
   DisableBuildWarnings = true,
   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil,
      FileName = "Big Hub"
   },
   Discord = {
      Enabled = false,
      Invite = "noinvitelink",
      RememberJoins = true
   },
   KeySystem = true,
   KeySettings = {
      Title = "Key System",
      Subtitle = "Paid Key",
      Note = "Buy Key from Demon Cheats team!",
      FileName = "Key",
      SaveKey = true,
      GrabKeyFromSite = false,
      Key = {"DEMON-YTOK"}
   }
})

-- à¸•à¸±à¸§à¹à¸›à¸£à¸£à¸°à¸šà¸š
local Players = game:GetService("Players")
local RS = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local humanoid = char:WaitForChild("Humanoid")

-- à¸•à¸±à¸§à¹à¸›à¸£à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™
local flying = false
local vv, gyro
local flySpeed = 200
local superSpeed = false
local runSpeed = 32
local noclipEnabled = false
local infJumpEnabled = false

-- === à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸šà¸´à¸™ ===
local function startFlying()
    if flying then return end
    flying = true
    humanoid.PlatformStand = true
    vv = Instance.new("BodyVelocity")
    vv.MaxForce = Vector3.new(1e5,1e5,1e5)
    vv.P = 1250
    vv.Velocity = Vector3.zero
    vv.Parent = hrp
    gyro = Instance.new("BodyGyro")
    gyro.MaxTorque = Vector3.new(4e5,4e5,4e5)
    gyro.P = 3000
    gyro.CFrame = hrp.CFrame
    gyro.Parent = hrp
    Rayfield:Notify({Title = "à¹‚à¸«à¸¡à¸”à¸šà¸´à¸™à¹€à¸›à¸´à¸”!", Content = "à¹ƒà¸Šà¹‰ W,A,S,D,Space,Ctrl à¹€à¸žà¸·à¹ˆà¸­à¸„à¸§à¸šà¸„à¸¸à¸¡", Duration = 3, Image = 6026568198})
end

local function stopFlying()
    if not flying then return end
    flying = false
    if vv then vv:Destroy() vv=nil end
    if gyro then gyro:Destroy() gyro=nil end
    humanoid.PlatformStand = false
    Rayfield:Notify({Title = "à¹‚à¸«à¸¡à¸”à¸šà¸´à¸™à¸›à¸´à¸”", Content = "à¸¥à¸‡à¸ˆà¸­à¸”à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢", Duration = 3, Image = 6026568198})
end

-- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸§à¸´à¹ˆà¸‡à¹€à¸£à¹‡à¸§
local function toggleSpeed(on)
    superSpeed = on
    humanoid.WalkSpeed = superSpeed and runSpeed or 16
    Rayfield:Notify({Title = superSpeed and "à¸§à¸´à¹ˆà¸‡à¹€à¸£à¹‡à¸§à¹€à¸›à¸´à¸”" or "à¸§à¸´à¹ˆà¸‡à¹€à¸£à¹‡à¸§à¸›à¸´à¸”", Content = superSpeed and "à¸§à¸´à¹ˆà¸‡à¹€à¸£à¹‡à¸§à¸ªà¸¸à¸”à¸‚à¸µà¸”!" or "à¸à¸¥à¸±à¸šà¸ªà¸¹à¹ˆà¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§à¸›à¸à¸•à¸´", Duration = 3, Image = 6023426921})
end

-- === à¹à¸—à¹‡à¸šà¸•à¸±à¸§à¸¥à¸°à¸„à¸£ ===
local MainTab = Window:CreateTab("à¹ƒà¸Šà¹‰à¸šà¹ˆà¸­à¸¢")
local UserInputService = game:GetService("UserInputService")
local godmodeToggled = false

MainTab:CreateButton({Name = "à¸­à¸¡à¸•à¸°",Callback = function()loadstring(game:HttpGet("https://raw.githubusercontent.com/livezalaeveryday/99-Night-Forest/refs/heads/main/godmode"))()game:GetService("StarterGui"):SetCore("SendNotification", {Title = "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!",Text = "Godmode Active",Duration = 3})end})
MainTab:CreateButton({Name = "à¸«à¸™à¸µà¸à¸¥à¸±à¸šà¸šà¹‰à¸²à¸™",Callback = function()local char = player.Character or player.CharacterAdded:Wait()local hrp = char:WaitForChild("HumanoidRootPart")hrp.CFrame = CFrame.new(12.079488, 0, 3.2662038, 0, 0, 1, 0, 1, 0, -1, 0, 0)Rayfield:Notify({Title="à¸§à¸²à¸›à¸”à¹ˆà¸§à¸™!", Content="à¸–à¸¶à¸‡à¹à¸¥à¹‰à¸§", Duration=2, Image=13014647359})end})
MainTab:CreateButton({Name = "à¹€à¸•à¸´à¸¡à¹„à¸Ÿ",Callback = function()loadstring(game:HttpGet("https://raw.githubusercontent.com/livezalaeveryday/99-Night-Forest/refs/heads/main/getfire"))()game:GetService("StarterGui"):SetCore("SendNotification", {Title = "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!",Text = "à¹€à¸•à¸´à¸¡à¹„à¸Ÿà¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢",Duration = 3})end})
MainTab:CreateButton({Name = "à¹€à¸•à¸´à¸¡à¸¢à¸²",Callback = function()loadstring(game:HttpGet("https://raw.githubusercontent.com/livezalaeveryday/99-Night-Forest/refs/heads/main/getbandage"))()game:GetService("StarterGui"):SetCore("SendNotification", {Title = "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!",Text = "à¹€à¸•à¸´à¸¡à¸­à¸²à¸«à¸²à¸£à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢",Duration = 3})end})
MainTab:CreateButton({Name = "à¹€à¸•à¸´à¸¡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸šà¸”",Callback = function()loadstring(game:HttpGet("https://raw.githubusercontent.com/livezalaeveryday/99-Night-Forest/refs/heads/main/getiron"))()game:GetService("StarterGui"):SetCore("SendNotification", {Title = "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!",Text = "à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸šà¸”",Duration = 3})end})
local flyToggle = MainTab:CreateToggle({Name="à¹€à¸›à¸´à¸”/à¸›à¸´à¸” à¸à¸²à¸£à¸šà¸´à¸™", CurrentValue=false, Flag="FlyToggle", Callback=function(val) if val then startFlying() else stopFlying() end end})
MainTab:CreateButton({
    Name = "ðŸ”¥ à¸›à¸´à¸”à¸«à¸¡à¸­à¸à¸–à¸²à¸§à¸£",
    Callback = function()
        local Lighting = game:GetService("Lighting")
        
        -- à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Fog à¹ƒà¸«à¹‰à¸«à¸²à¸¢à¹„à¸› (visibility 100000 studs)
        Lighting.FogEnd = 100000
        Lighting.FogStart = 0  -- à¹€à¸£à¸´à¹ˆà¸¡à¸«à¸¡à¸­à¸à¹„à¸à¸¥à¸ªà¸¸à¸”
        
        -- à¸¥à¸š Atmosphere à¸–à¹‰à¸²à¸¡à¸µ (à¸ˆà¸° disable fog à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´)
        for _, v in pairs(Lighting:GetDescendants()) do
            if v:IsA("Atmosphere") then
                v:Destroy()
            end
        end
        
        -- à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¹€à¸à¸¡à¹€à¸‹à¹‡à¸•à¸„à¹ˆà¸²à¸à¸¥à¸±à¸š (à¸–à¸²à¸§à¸£ 100%)
        Lighting:GetPropertyChangedSignal("FogEnd"):Connect(function()
            Lighting.FogEnd = 100000
        end)
        Lighting.DescendantAdded:Connect(function(v)
            if v:IsA("Atmosphere") then
                v:Destroy()
            end
        end)
        
        Rayfield:Notify({
            Title = "à¸›à¸´à¸”à¸«à¸¡à¸­à¸à¸ªà¸³à¹€à¸£à¹‡à¸ˆ! ðŸ”¥",
            Content = "à¸¡à¸­à¸‡à¹€à¸«à¹‡à¸™à¹„à¸à¸¥à¸ªà¸¸à¸”à¸‚à¸µà¸” à¸–à¸²à¸§à¸£à¹„à¸¡à¹ˆà¸à¸¥à¸±à¸šà¸¡à¸²",
            Duration = 4
        })
    end
})

-- à¸›à¸¸à¹ˆà¸¡à¸­à¸¡à¸•à¸°à¹à¸šà¸š Keybind (à¸à¸” Numpad1 à¹€à¸žà¸·à¹ˆà¸­à¹€à¸›à¸´à¸” Godmode)
MainTab:CreateKeybind({
    Name = "à¸­à¸¡à¸•à¸° (Godmode)",
    CurrentKeybind = "KeypadOne",  -- à¸«à¸£à¸·à¸­ "Numpad1" à¸à¹‡à¹„à¸”à¹‰
    HoldToInteract = false,        -- à¸à¸”à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§à¸—à¸³à¸‡à¸²à¸™
    Callback = function()
        -- à¹‚à¸«à¸¥à¸”à¹à¸¥à¸°à¸£à¸±à¸™à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œ Godmode
        loadstring(game:HttpGet("https://raw.githubusercontent.com/livezalaeveryday/99-Night-Forest/refs/heads/main/godmode"))()
        
        -- à¸«à¸£à¸·à¸­à¸–à¹‰à¸²à¹ƒà¸Šà¹‰ Rayfield Notify (à¸ªà¸§à¸¢à¸à¸§à¹ˆà¸²)
        Rayfield:Notify({
            Title = "à¸­à¸¡à¸•à¸°à¹€à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™!",
            Content = "Godmode Active à¹à¸¥à¹‰à¸§",
            Duration = 4,
            Image = 13014647359  -- à¹„à¸­à¸„à¸­à¸™ Roblox (à¸–à¹‰à¸²à¸¡à¸µ)
        })
    end
})


MainTab:CreateKeybind({
    Name = "à¸«à¸™à¸µà¸à¸¥à¸±à¸šà¸šà¹‰à¸²à¸™ (Hotkey)",
    CurrentKeybind = "KeypadTwo",  -- à¸«à¸£à¸·à¸­ "Numpad2" à¸à¹‡à¹„à¸”à¹‰
    HoldToInteract = false,        -- false = à¸à¸”à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§à¸—à¸³à¸‡à¸²à¸™, true = à¸•à¹‰à¸­à¸‡à¸à¸”à¸„à¹‰à¸²à¸‡
    Callback = function()
        local char = player.Character or player.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")
        hrp.CFrame = CFrame.new(12.079488, 0, 3.2662038, 0, 0, 1, 0, 1, 0, -1, 0, 0)
        Rayfield:Notify({
            Title = "à¸«à¸™à¸µà¸à¸¥à¸±à¸šà¸šà¹‰à¸²à¸™",
            Content = "à¸–à¸¶à¸‡à¹à¸¥à¹‰à¸§",
            Duration = 2,
            Image = 13014647359
        })
    end
})

MainTab:CreateKeybind({
    Name = "à¹€à¸•à¸´à¸¡à¹„à¸Ÿ",
    CurrentKeybind = "KeypadThree",  -- à¸«à¸£à¸·à¸­ "Numpad1" à¸à¹‡à¹„à¸”à¹‰
    HoldToInteract = false,        -- à¸à¸”à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§à¸—à¸³à¸‡à¸²à¸™
    Callback = function()
        -- à¹‚à¸«à¸¥à¸”à¹à¸¥à¸°à¸£à¸±à¸™à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œ Godmode
        loadstring(game:HttpGet("https://raw.githubusercontent.com/livezalaeveryday/99-Night-Forest/refs/heads/main/getfire"))()

        -- à¸«à¸£à¸·à¸­à¸–à¹‰à¸²à¹ƒà¸Šà¹‰ Rayfield Notify (à¸ªà¸§à¸¢à¸à¸§à¹ˆà¸²)
        Rayfield:Notify({
            Title = "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!",
            Content = "à¹€à¸•à¸´à¸¡à¹„à¸Ÿà¹à¸¥à¹‰à¸§",
            Duration = 4,
            Image = 13014647359  -- à¹„à¸­à¸„à¸­à¸™ Roblox (à¸–à¹‰à¸²à¸¡à¸µ)
        })
    end
})

MainTab:CreateKeybind({
    Name = "à¹€à¸•à¸´à¸¡à¸¢à¸²",
    CurrentKeybind = "KeypadFour",  -- à¸«à¸£à¸·à¸­ "Numpad1" à¸à¹‡à¹„à¸”à¹‰
    HoldToInteract = false,        -- à¸à¸”à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§à¸—à¸³à¸‡à¸²à¸™
    Callback = function()
        -- à¹‚à¸«à¸¥à¸”à¹à¸¥à¸°à¸£à¸±à¸™à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œ Godmode
        loadstring(game:HttpGet("https://raw.githubusercontent.com/livezalaeveryday/99-Night-Forest/refs/heads/main/getbandage"))()

        -- à¸«à¸£à¸·à¸­à¸–à¹‰à¸²à¹ƒà¸Šà¹‰ Rayfield Notify (à¸ªà¸§à¸¢à¸à¸§à¹ˆà¸²)
        Rayfield:Notify({
            Title = "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!",
            Content = "à¹€à¸•à¸´à¸¡à¸¢à¸²à¹à¸¥à¹‰à¸§",
            Duration = 4,
            Image = 13014647359  -- à¹„à¸­à¸„à¸­à¸™ Roblox (à¸–à¹‰à¸²à¸¡à¸µ)
        })
    end
})

MainTab:CreateKeybind({
    Name = "à¹€à¸•à¸´à¸¡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸šà¸”",
    CurrentKeybind = "KeypadFive",  -- à¸«à¸£à¸·à¸­ "Numpad1" à¸à¹‡à¹„à¸”à¹‰
    HoldToInteract = false,        -- à¸à¸”à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§à¸—à¸³à¸‡à¸²à¸™
    Callback = function()
        -- à¹‚à¸«à¸¥à¸”à¹à¸¥à¸°à¸£à¸±à¸™à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œ Godmode
        loadstring(game:HttpGet("https://raw.githubusercontent.com/livezalaeveryday/99-Night-Forest/refs/heads/main/getiron"))()

        -- à¸«à¸£à¸·à¸­à¸–à¹‰à¸²à¹ƒà¸Šà¹‰ Rayfield Notify (à¸ªà¸§à¸¢à¸à¸§à¹ˆà¸²)
        Rayfield:Notify({
            Title = "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!",
            Content = "à¹€à¸•à¸´à¸¡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸šà¸”à¹à¸¥à¹‰à¸§",
            Duration = 4,
            Image = 13014647359  -- à¹„à¸­à¸„à¸­à¸™ Roblox (à¸–à¹‰à¸²à¸¡à¸µ)
        })
    end
})


-- Toggle à¸à¸²à¸£à¸šà¸´à¸™ (Flag = "FlyToggle")
local flyToggle = MainTab:CreateToggle({
    Name = "à¹€à¸›à¸´à¸”/à¸›à¸´à¸” à¸à¸²à¸£à¸šà¸´à¸™",
    CurrentValue = false,
    Flag = "FlyToggle",
    Callback = function(val)
        if val then
            startFlying()
        else
            stopFlying()
        end
    end
})

-- Hotkey à¸ªà¸³à¸«à¸£à¸±à¸š Toggle à¸à¸²à¸£à¸šà¸´à¸™ (à¸à¸” Numpad3 à¹€à¸žà¸·à¹ˆà¸­à¹€à¸›à¸´à¸”/à¸›à¸´à¸”)
MainTab:CreateKeybind({
    Name = "à¸à¸²à¸£à¸šà¸´à¸™ (Hotkey)",
    CurrentKeybind = "KeypadSix",  -- à¸«à¸£à¸·à¸­ "Numpad3"
    HoldToInteract = false,          -- à¸à¸”à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§ Toggle
    Callback = function()
        -- Toggle à¸„à¹ˆà¸² FlyToggle (à¸ˆà¸²à¸ false à¹€à¸›à¹‡à¸™ true à¸«à¸£à¸·à¸­ true à¹€à¸›à¹‡à¸™ false)
        local newValue = not flyToggle.CurrentValue
        flyToggle:Set(newValue)  -- Set à¸„à¹ˆà¸²à¹ƒà¸«à¸¡à¹ˆ (à¸ˆà¸°à¹€à¸£à¸µà¸¢à¸ Callback à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´)
        
        Rayfield:Notify({
            Title = "à¸à¸²à¸£à¸šà¸´à¸™",
            Content = newValue and "à¹€à¸›à¸´à¸”à¹à¸¥à¹‰à¸§ (à¸à¸” Numpad3)" or "à¸›à¸´à¸”à¹à¸¥à¹‰à¸§ (à¸à¸” Numpad3)",
            Duration = 2,
            Image = 13014647359
        })
    end
})

MainTab:CreateKeybind({
    Name = "à¸›à¸´à¸”à¸«à¸¡à¸­à¸à¸–à¸²à¸§à¸£ (Hotkey)",
    CurrentKeybind = "KeypadSeven",  -- à¸«à¸£à¸·à¸­ "Numpad4"
    HoldToInteract = false,         -- à¸à¸”à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§à¸—à¸³à¸‡à¸²à¸™
    Callback = function()
        local Lighting = game:GetService("Lighting")
        
        -- à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Fog à¹ƒà¸«à¹‰à¸«à¸²à¸¢à¹„à¸› (visibility 100000 studs)
        Lighting.FogEnd = 100000
        Lighting.FogStart = 0
        
        -- à¸¥à¸š Atmosphere à¸–à¹‰à¸²à¸¡à¸µ
        for _, v in pairs(Lighting:GetDescendants()) do
            if v:IsA("Atmosphere") then
                v:Destroy()
            end
        end
        
        -- à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¹€à¸à¸¡à¹€à¸‹à¹‡à¸•à¸„à¹ˆà¸²à¸à¸¥à¸±à¸š (à¸–à¸²à¸§à¸£)
        Lighting:GetPropertyChangedSignal("FogEnd"):Connect(function()
            Lighting.FogEnd = 100000
        end)
        Lighting.DescendantAdded:Connect(function(v)
            if v:IsA("Atmosphere") then
                v:Destroy()
            end
        end)
        
        Rayfield:Notify({
            Title = "à¸›à¸´à¸”à¸«à¸¡à¸­à¸à¸ªà¸³à¹€à¸£à¹‡à¸ˆ! ðŸ”¥",
            Content = "à¸¡à¸­à¸‡à¹€à¸«à¹‡à¸™à¹„à¸à¸¥à¸ªà¸¸à¸”à¸‚à¸µà¸” (à¸à¸” Numpad4)",
            Duration = 3,
            Image = 13014647359
        })
    end
})

-- === à¹à¸—à¹‡à¸šà¸§à¸²à¸› + à¸¥à¸²à¸à¸¨à¸ž (à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™à¹à¸¢à¸à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢) ===
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local player = Players.LocalPlayer

-- à¸ªà¸£à¹‰à¸²à¸‡à¹à¸—à¹‡à¸š
local friendTab = Window:CreateTab("à¸§à¸²à¸›")

-- ===== Helpers =====
local function getPlayerList()
    local list = {}
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= player then
            table.insert(list, string.format("%s (%s)", p.DisplayName, p.Name))
        end
    end
    return list
end

-- à¸”à¸¶à¸‡à¸¨à¸žà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸—à¸µà¹ˆà¸¥à¸‡à¸—à¹‰à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸”à¹‰à¸§à¸¢ " Body" à¸ˆà¸²à¸à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ Characters
local function getAllBodies()
    local folder = Workspace:FindFirstChild("Characters")
    if not folder then return {} end
    local bodies = {}
    for _, obj in ipairs(folder:GetChildren()) do
        if typeof(obj) == "Instance" and typeof(obj.Name) == "string" then
            if obj.Name:sub(-5) == " Body" then
                table.insert(bodies, obj)
            end
        end
    end
    return bodies
end

-- à¸«à¸² BasePart à¹ƒà¸”à¹† à¹ƒà¸™à¹‚à¸¡à¹€à¸”à¸¥ (à¸à¸±à¸™à¸à¸£à¸“à¸µà¹„à¸¡à¹ˆà¸¡à¸µ PrimaryPart)
local function findAnyBasePart(model)
    if not model or not model:IsA("Model") then return nil end
    if model.PrimaryPart then return model.PrimaryPart end
    for _, d in ipairs(model:GetDescendants()) do
        if d:IsA("BasePart") then
            return d
        end
    end
    return nil
end

-- ===== UI: Dropdown à¹€à¸žà¸·à¹ˆà¸­à¸™ (à¹ƒà¸Šà¹‰à¹€à¸‰à¸žà¸²à¸° â€œà¸§à¸²à¸›à¹„à¸›à¸«à¸²à¹€à¸žà¸·à¹ˆà¸­à¸™â€) =====
local friendDropdown = friendTab:CreateDropdown({
    Name = "à¹€à¸¥à¸·à¸­à¸à¹€à¸žà¸·à¹ˆà¸­à¸™",
    Options = getPlayerList(),
    CurrentOption = {},
    Flag = "FriendSelect"
})

-- à¸›à¸¸à¹ˆà¸¡à¸§à¸²à¸›à¹„à¸›à¸«à¸²à¹€à¸žà¸·à¹ˆà¸­à¸™ (à¹ƒà¸Šà¹‰ dropdown)
friendTab:CreateButton({
    Name = "à¸§à¸²à¸›à¹„à¸›à¸«à¸²à¹€à¸žà¸·à¹ˆà¸­à¸™",
    Callback = function()
        local selected = friendDropdown.CurrentOption[1]
        if not selected or selected == "" then
            Rayfield:Notify({Title = "Error", Content = "à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¹€à¸žà¸·à¹ˆà¸­à¸™à¸à¹ˆà¸­à¸™!", Duration = 3})
            return
        end

        local friendName = selected:match("%((.-)%)") or selected
        local char = player.Character or player.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")

        local targetPlayer = Players:FindFirstChild(friendName)
        if targetPlayer and targetPlayer.Character then
            local thrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
            if thrp then
                hrp.CFrame = thrp.CFrame + Vector3.new(0, 3, 0)
                Rayfield:Notify({Title = "Teleport à¸ªà¸³à¹€à¸£à¹‡à¸ˆ", Content = "à¹„à¸›à¸«à¸² "..friendName, Duration = 3})
                return
            end
        end
        Rayfield:Notify({Title = "à¹„à¸¡à¹ˆà¸žà¸šà¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢", Content = "à¹€à¸žà¸·à¹ˆà¸­à¸™à¹„à¸¡à¹ˆà¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ/à¹„à¸¡à¹ˆà¸¡à¸µ HRP", Duration = 3})
    end
})

-- ===== à¸•à¸±à¸§à¸›à¸£à¸±à¸šà¸„à¹ˆà¸² à¸¥à¸²à¸à¸¨à¸ž =====
local DragOffset = 5
local DragDelay = 0.2

friendTab:CreateSlider({
    Name = "à¸£à¸°à¸¢à¸°à¸«à¹ˆà¸²à¸‡à¸¥à¸²à¸à¸¨à¸ž (studs)",
    Range = {1, 15},
    Increment = 1,
    CurrentValue = DragOffset,
    Flag = "DragOffset",
    Callback = function(val) DragOffset = val end
})

friendTab:CreateSlider({
    Name = "à¸”à¸µà¹€à¸¥à¸¢à¹Œà¸¥à¸²à¸ (à¸§à¸´à¸™à¸²à¸—à¸µ)",
    Range = {0.05, 1},
    Increment = 0.05,
    CurrentValue = DragDelay,
    Flag = "DragDelay",
    Callback = function(val) DragDelay = val end
})

-- ===== à¸›à¸¸à¹ˆà¸¡ â€œà¸¥à¸²à¸à¸¨à¸žà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”â€ (à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ dropdown) =====
friendTab:CreateButton({
    Name = "à¸¥à¸²à¸à¸¨à¸žà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¹€à¸¥à¸·à¸­à¸à¸Šà¸·à¹ˆà¸­)",
    Callback = function()
        -- à¹€à¸•à¸£à¸µà¸¢à¸¡à¸•à¸±à¸§à¹€à¸£à¸²
        local char = player.Character or player.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")

        -- à¹€à¸•à¸£à¸µà¸¢à¸¡ RemoteEvents
        local remoteEvents = ReplicatedStorage:FindFirstChild("RemoteEvents")
        local startDragging = remoteEvents and remoteEvents:FindFirstChild("RequestStartDraggingItem")
        local stopDragging  = remoteEvents and remoteEvents:FindFirstChild("StopDraggingItem")

        if not (startDragging and stopDragging) then
            Rayfield:Notify({Title = "à¸œà¸´à¸”à¸žà¸¥à¸²à¸”", Content = "à¹„à¸¡à¹ˆà¸žà¸š RemoteEvent à¸¥à¸²à¸à¸¨à¸ž", Duration = 5})
            return
        end

        -- à¸«à¸² â€œà¸¨à¸žà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”â€
        local bodies = getAllBodies()
        if #bodies == 0 then
            Rayfield:Notify({Title = "à¹„à¸¡à¹ˆà¸žà¸šà¸¨à¸ž", Content = "à¸•à¸­à¸™à¸™à¸µà¹‰à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¹ƒà¸„à¸£à¸•à¸²à¸¢", Duration = 4})
            return
        end

        Rayfield:Notify({Title = "à¸à¸³à¸¥à¸±à¸‡à¸¥à¸²à¸à¸¨à¸ž", Content = "à¸žà¸š "..#bodies.." à¸•à¸±à¸§", Duration = 3})

        task.spawn(function()
            for _, body in ipairs(bodies) do
                -- à¸à¸±à¸™à¸à¸£à¸“à¸µà¸­à¸­à¸šà¹€à¸ˆà¹‡à¸à¸•à¹Œà¸«à¸²à¸¢à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸—à¸²à¸‡
                if body and body.Parent then
                    local inst = (typeof(cloneref) == "function") and cloneref(body) or body
                    startDragging:FireServer(inst)
                    task.wait(0.02)

                    -- à¹€à¸¥à¸·à¸­à¸à¸žà¸²à¸£à¹Œà¸—à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡à¹€à¸žà¸·à¹ˆà¸­à¸§à¸²à¸‡à¹ƒà¸«à¹‰à¹ƒà¸à¸¥à¹‰à¸•à¸±à¸§à¹€à¸£à¸²
                    local refPart = findAnyBasePart(body)
                    if refPart then
                        -- à¹ƒà¸Šà¹‰ PivotTo à¹ƒà¸«à¹‰à¸—à¸±à¹‰à¸‡à¹‚à¸¡à¹€à¸”à¸¥à¹€à¸¥à¸·à¹ˆà¸­à¸™à¸¡à¸²à¸«à¸™à¹‰à¸²à¹€à¸£à¸²
                        body:PivotTo(hrp.CFrame * CFrame.new(0, 0, -DragOffset))
                    end

                    task.wait(0.05)
                    stopDragging:FireServer(inst)
                    task.wait(DragDelay)
                end
            end

            Rayfield:Notify({Title = "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!", Content = "à¸¥à¸²à¸à¸¨à¸žà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” "..#bodies.." à¸•à¸±à¸§!", Duration = 4})
        end)
    end
})

-- Hotkey à¸ªà¸³à¸«à¸£à¸±à¸šà¸¥à¸²à¸à¸¨à¸žà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¸à¸” Numpad5)
MainTab:CreateKeybind({  -- à¸«à¸£à¸·à¸­ friendTab à¸–à¹‰à¸²à¸­à¸¢à¸²à¸à¹ƒà¸«à¹‰à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¹à¸—à¹‡à¸šà¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸™
    Name = "à¸¥à¸²à¸à¸¨à¸žà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (Hotkey)",
    CurrentKeybind = "KeypadEight",  -- à¸«à¸£à¸·à¸­ "Numpad5"
    HoldToInteract = false,         -- à¸à¸”à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§à¸—à¸³à¸‡à¸²à¸™
    Callback = function()
        -- à¹€à¸•à¸£à¸µà¸¢à¸¡à¸•à¸±à¸§à¹€à¸£à¸²
        local char = player.Character or player.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")
        -- à¹€à¸•à¸£à¸µà¸¢à¸¡ RemoteEvents
        local remoteEvents = ReplicatedStorage:FindFirstChild("RemoteEvents")
        local startDragging = remoteEvents and remoteEvents:FindFirstChild("RequestStartDraggingItem")
        local stopDragging  = remoteEvents and remoteEvents:FindFirstChild("StopDraggingItem")
        if not (startDragging and stopDragging) then
            Rayfield:Notify({Title = "à¸œà¸´à¸”à¸žà¸¥à¸²à¸”", Content = "à¹„à¸¡à¹ˆà¸žà¸š RemoteEvent à¸¥à¸²à¸à¸¨à¸ž", Duration = 5})
            return
        end
        -- à¸«à¸² "à¸¨à¸žà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"
        local bodies = getAllBodies()
        if #bodies == 0 then
            Rayfield:Notify({Title = "à¹„à¸¡à¹ˆà¸žà¸šà¸¨à¸ž", Content = "à¸•à¸­à¸™à¸™à¸µà¹‰à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¹ƒà¸„à¸£à¸•à¸²à¸¢", Duration = 4})
            return
        end
        Rayfield:Notify({Title = "à¸à¸³à¸¥à¸±à¸‡à¸¥à¸²à¸à¸¨à¸ž", Content = "à¸žà¸š "..#bodies.." à¸•à¸±à¸§ (à¸à¸” Numpad5)", Duration = 3})
        task.spawn(function()
            for _, body in ipairs(bodies) do
                -- à¸à¸±à¸™à¸à¸£à¸“à¸µà¸­à¸­à¸šà¹€à¸ˆà¹‡à¸à¸•à¹Œà¸«à¸²à¸¢à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸—à¸²à¸‡
                if body and body.Parent then
                    local inst = (typeof(cloneref) == "function") and cloneref(body) or body
                    startDragging:FireServer(inst)
                    task.wait(0.02)
                    -- à¹€à¸¥à¸·à¸­à¸à¸žà¸²à¸£à¹Œà¸—à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡à¹€à¸žà¸·à¹ˆà¸­à¸§à¸²à¸‡à¹ƒà¸«à¹‰à¹ƒà¸à¸¥à¹‰à¸•à¸±à¸§à¹€à¸£à¸²
                    local refPart = findAnyBasePart(body)
                    if refPart then
                        -- à¹ƒà¸Šà¹‰ PivotTo à¹ƒà¸«à¹‰à¸—à¸±à¹‰à¸‡à¹‚à¸¡à¹€à¸”à¸¥à¹€à¸¥à¸·à¹ˆà¸­à¸™à¸¡à¸²à¸«à¸™à¹‰à¸²à¹€à¸£à¸²
                        body:PivotTo(hrp.CFrame * CFrame.new(0, 0, -DragOffset))
                    end
                    task.wait(0.05)
                    stopDragging:FireServer(inst)
                    task.wait(DragDelay)
                end
            end
            Rayfield:Notify({Title = "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ! ðŸ’€", Content = "à¸¥à¸²à¸à¸¨à¸žà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” "..#bodies.." à¸•à¸±à¸§!", Duration = 4})
        end)
    end
})



-- === à¹à¸—à¹‡à¸šà¸§à¸²à¸›à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆ ===
local tpTab = Window:CreateTab("à¸§à¸²à¸›à¹„à¸›à¸—à¸µà¹ˆà¸•à¹ˆà¸²à¸‡à¹†")

-- à¸•à¸±à¸§à¹à¸›à¸£à¹€à¸à¹‡à¸šà¸›à¸¸à¹ˆà¸¡à¹€à¸žà¸·à¹ˆà¸­à¸¥à¸šà¸•à¸­à¸™à¸£à¸µà¹€à¸Ÿà¸£à¸Š
local currentButtons = {}
local locationLabel

-- à¸›à¸£à¸°à¸à¸²à¸¨ player à¸à¹ˆà¸­à¸™à¹ƒà¸Šà¹‰
local player = game.Players.LocalPlayer

-- à¹€à¸à¹‡à¸š Locations à¹„à¸§à¹‰à¸™à¸­à¸à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™ (à¸ªà¸³à¸„à¸±à¸à¸¡à¸²à¸!)
local Locations = {}

-- à¸Šà¸·à¹ˆà¸­à¸ à¸²à¸©à¸²à¹„à¸—à¸¢
local thaiNames = {
    StrongHold = "à¸›à¸£à¸²à¸ªà¸²à¸—à¹€à¸žà¸Šà¸£",
    Fairy_House = "à¸šà¹‰à¸²à¸™à¸™à¸²à¸‡à¸Ÿà¹‰à¸²", 
    Ice_Temple = "à¸§à¸´à¸«à¸²à¸£à¸™à¹‰à¸³à¹à¸‚à¹‡à¸‡",
    Jail_Cellar1 = "à¸«à¹‰à¸­à¸‡à¸‚à¸±à¸‡à¹ƒà¸•à¹‰à¸”à¸´à¸™ 1",
    Jail_Cellar2 = "à¸«à¹‰à¸­à¸‡à¸‚à¸±à¸‡à¹ƒà¸•à¹‰à¸”à¸´à¸™ 2", 
    Jail_Cellar3 = "à¸«à¹‰à¸­à¸‡à¸‚à¸±à¸‡à¹ƒà¸•à¹‰à¸”à¸´à¸™ 3",
    Jail_Cellar4 = "à¸«à¹‰à¸­à¸‡à¸‚à¸±à¸‡à¹ƒà¸•à¹‰à¸”à¸´à¸™ 4",
    SkillsBuilding = "à¸­à¸²à¸„à¸²à¸£à¸à¸¶à¸à¸ªà¸à¸´à¸¥",
    Snow_Clothing_Shop = "à¸£à¹‰à¸²à¸™à¹€à¸ªà¸·à¹‰à¸­à¸œà¹‰à¸²à¸«à¸´à¸¡à¸°",
    ToolWorkshop = "à¹‚à¸£à¸‡à¸‡à¸²à¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­"
}

-- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸”à¸¶à¸‡ CFrame à¸ˆà¸²à¸ landmark
local function getCFrameFromLandmark(landmark)
    if landmark:IsA("Model") then
        if landmark.PrimaryPart then
            return landmark.PrimaryPart.CFrame
        else
            for _, part in pairs(landmark:GetChildren()) do
                if part:IsA("BasePart") then
                    return part.CFrame
                end
            end
        end
    elseif landmark:IsA("BasePart") then
        return landmark.CFrame
    end
    return nil
end

-- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸£à¸µà¹€à¸Ÿà¸£à¸Šà¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆ
local function refreshLocations()
    -- à¸¥à¸šà¸›à¸¸à¹ˆà¸¡à¹€à¸à¹ˆà¸²
    for _, btn in pairs(currentButtons) do
        if btn.Remove then btn:Remove() end
    end
    currentButtons = {}

    -- à¸£à¸µà¹€à¸‹à¹‡à¸• Locations
    Locations = {}

    local folder = Workspace:FindFirstChild("Map") and Workspace.Map:FindFirstChild("Landmarks")
    
    if folder then
        for _, landm
    local cloned = cloneref(item)

    startDragging:FireServer(cloned)
    RunService.Heartbeat:Wait() -- à¹€à¸œà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸ªà¸–à¸²à¸™à¸°à¸¥à¸²à¸à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œà¹€à¸‹à¹‡à¸•à¸—à¸±à¸™

    local pos = (hrp.CFrame * CFrame.new(0, 0, -offsetDistance)).Position

    task.spawn(function()
        if cloned:IsA("BasePart") then
            cloned.CFrame = CFrame.new(pos)
        elseif cloned:IsA("Model") and cloned.PrimaryPart then
            cloned:SetPrimaryPartCFrame(CFrame.new(pos))
        end
    end)

    task.wait(0.05)
    stopDragging:FireServer(cloned)
    return true
end

-- ===== UI =====
local tab = Window:CreateTab("à¸”à¸¶à¸‡à¸‚à¸­à¸‡à¹€à¸‚à¹‰à¸²à¸•à¸±à¸§", 0)

-- 1) Dropdown à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¹„à¸­à¹€à¸—à¸¡
local options  = getSortedItemNames()
local selected = asString(options[1])
if selected == "(à¹„à¸¡à¹ˆà¸¡à¸µà¹„à¸­à¹€à¸—à¸¡à¹ƒà¸™ Items)" then
    selected = nil
end

local dropdown = tab:CreateDropdown({
    Name = "à¹€à¸¥à¸·à¸­à¸à¹„à¸­à¹€à¸—à¸¡ (à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” à¹€à¸£à¸µà¸¢à¸‡ Aâ†’Z)",
    Options = options,
    CurrentOption = options[1],
    Multiple = false,
    Callback = function(opt)
        selected = asString(opt)
        if selected == "(à¹„à¸¡à¹ˆà¸¡à¸µà¹„à¸­à¹€à¸—à¸¡à¹ƒà¸™ Items)" then
            selected = nil
        end
    end
})

-- 2) à¸›à¸¸à¹ˆà¸¡à¸£à¸µà¹€à¸Ÿà¸£à¸Šà¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­
tab:CreateButton({
    Name = "à¸£à¸µà¹€à¸Ÿà¸£à¸Šà¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­",
    Callback = function()
        options = getSortedItemNames()

        -- à¹ƒà¸Šà¹‰ Refresh à¹ƒà¸«à¹‰à¸–à¸¹à¸à¸à¸±à¸š Rayfield
        dropdown:Refresh(options, true)

        selected = asString(options[1])
        if selected == "(à¹„à¸¡à¹ˆà¸¡à¸µà¹„à¸­à¹€à¸—à¸¡à¹ƒà¸™ Items)" then
            selected = nil
        else
            dropdown:Set(options[1])
        end

        Rayfield:Notify({
            Title   = "à¸­à¸±à¸›à¹€à¸”à¸•à¹à¸¥à¹‰à¸§",
            Content = "à¸£à¸µà¹€à¸Ÿà¸£à¸Šà¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸³à¹€à¸£à¹‡à¸ˆ",
            Duration = 2
        })
    end
})

-- 3) à¸£à¸°à¸šà¸¸à¸ˆà¸³à¸™à¸§à¸™ (à¹ƒà¸Šà¹‰ Slider à¸‡à¹ˆà¸²à¸¢ à¹†)
local currentQty = 10
tab:CreateSlider({
    Name = "à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸ˆà¸°à¸”à¸¶à¸‡",
    Range = {1, 500},       -- à¹€à¸žà¸”à¸²à¸™ 500 à¹ƒà¸«à¹‰à¸”à¸¹à¹„à¸¡à¹ˆà¹‚à¸«à¸”à¹€à¸à¸´à¸™ (à¸›à¸£à¸±à¸šà¹„à¸”à¹‰)
    Increment = 1,
    CurrentValue = currentQty,
    Callback = function(v)
        currentQty = v
    end
})

-- 4) à¸›à¸¸à¹ˆà¸¡à¸”à¸¶à¸‡à¸•à¸²à¸¡à¸ˆà¸³à¸™à¸§à¸™
tab:CreateButton({
    Name = "à¸”à¸¶à¸‡à¸•à¸²à¸¡à¸ˆà¸³à¸™à¸§à¸™",
    Callback = function()
        if not selected then
            Rayfield:Notify({
                Title = "à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¸­à¸‡",
                Content = "à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¹„à¸­à¹€à¸—à¸¡à¸à¹ˆà¸­à¸™",
                Duration = 2
            })
            return
        end

        local want    = currentQty or 1
        local targets = findItemsByName(selected, want)

        if #targets == 0 then
            Rayfield:Notify({
                Title = "à¹„à¸¡à¹ˆà¸žà¸š",
                Content = "à¹„à¸¡à¹ˆà¸¡à¸µ " .. selected .. " à¹ƒà¸«à¹‰à¸”à¸¶à¸‡",
                Duration = 2
            })
            return
        end

        local dragged = 0
        for _, it in ipairs(targets) do
            if dragOne(it) then
                dragged += 1
            end
            if perItemDelay > 0 then
                task.wait(perItemDelay)
            end
        end

        Rayfield:Notify({
            Title = "à¸ªà¸³à¹€à¸£à¹‡à¸ˆ",
            Content = "à¸”à¸¶à¸‡ " .. selected .. " à¸¡à¸²à¹à¸¥à¹‰à¸§ " .. tostring(dragged) .. " à¸Šà¸´à¹‰à¸™",
            Duration = 3
        })
    end
})

-- à¸­à¸±à¸›à¹€à¸”à¸• HRP à¹€à¸¡à¸·à¹ˆà¸­à¸£à¸µà¸ªà¸›à¸­à¸™
player.CharacterAdded:Connect(function(char)
    character = char
    hrp = character:WaitForChild("HumanoidRootPart")
end)

-- === à¹à¸—à¹‡à¸šà¹ƒà¸«à¸¡à¹ˆ: à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹€à¸ªà¸£à¸´à¸¡ ===
local miscTab = Window:CreateTab("à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹€à¸ªà¸£à¸´à¸¡")

-- 2) Anti Idle / Anti AFK (à¸à¸±à¸™à¹€à¸•à¸°à¸­à¸­à¸à¹€à¸¡à¸·à¹ˆà¸­à¸¢à¸·à¸™à¸™à¸´à¹ˆà¸‡à¸™à¸²à¸™)
local antiIdleEnabled = false
local antiIdleConnection

local function startAntiIdle()
    if antiIdleEnabled then return end
    antiIdleEnabled = true
    
    antiIdleConnection = game:GetService("RunService").Heartbeat:Connect(function()
        if antiIdleEnabled then
            -- à¸ªà¹ˆà¸‡à¸ªà¸±à¸à¸à¸²à¸“à¸§à¹ˆà¸²à¹€à¸£à¸²à¸¢à¸±à¸‡ active à¸­à¸¢à¸¹à¹ˆ (à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ Roblox à¹ƒà¸Šà¹‰à¸•à¸£à¸§à¸ˆ AFK)
            pcall(function()
                game:GetService("VirtualUser"):CaptureController()
                game:GetService("VirtualUser"):ClickButton2(Vector2.new())
            end)
        end
    end)
end

local function stopAntiIdle()
    antiIdleEnabled = false
    if antiIdleConnection then
        antiIdleConnection:Disconnect()
        antiIdleConnection = nil
    end
end

miscTab:CreateToggle({
    Name = "â° Anti Idle / Anti AFK",
    CurrentValue = false,
    Callback = function(val)
        if val then
            startAntiIdle()
            Rayfield:Notify({Title = "à¹€à¸›à¸´à¸” Anti-AFK", Content = "à¹„à¸¡à¹ˆà¹€à¸•à¸°à¸­à¸­à¸à¹à¸™à¹ˆà¸™à¸­à¸™ â°", Duration = 4})
        else
            stopAntiIdle()
            Rayfield:Notify({Title = "à¸›à¸´à¸” Anti-AFK", Content = "à¸£à¸°à¸§à¸±à¸‡à¹‚à¸”à¸™à¹€à¸•à¸°à¸™à¸°", Duration = 3})
        end
    end
})

-- à¹à¸ˆà¹‰à¸‡à¸•à¸­à¸™à¹‚à¸«à¸¥à¸”à¹€à¸ªà¸£à¹‡à¸ˆ
Rayfield:Notify({
    Title = "à¹€à¸žà¸´à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹ƒà¸«à¸¡à¹ˆ!",
    Content = "à¹„à¸›à¸—à¸µà¹ˆà¹à¸—à¹‡à¸š \"à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹€à¸ªà¸£à¸´à¸¡\" à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸Šà¹‰ Instant Prompt à¸à¸±à¸š Anti-AFK",
    Duration = 6,
    Image = 6026568198
})

-- === à¹à¸—à¹‡à¸šà¸ªà¸„à¸£à¸´à¸›à¸•à¹Œà¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡ ===
local extraTab = Window:CreateTab("Script à¸„à¹ˆà¸²à¸¢à¸­à¸·à¹ˆà¸™à¹†")
extraTab:CreateButton({Name = "Script SomTank", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/MQPS7/99-Night-in-the-Forset/refs/heads/main/99v5"))() end})
extraTab:CreateButton({Name = "Script Foxname Hub", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/caomod2077/Script/refs/heads/main/FoxnameHub.lua"))() end})
extraTab:CreateButton({Name = "Infinity Yild", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))() end})

-- === à¹€à¸„à¸£à¸”à¸´à¸• ===
local creditTab2 = Window:CreateTab("à¹€à¸„à¸£à¸”à¸´à¸•")
creditTab2:CreateLabel("owner by DemonScripts Channel")
creditTab2:CreateLabel("original script by DemonScripts")
creditTab2:CreateLabel("à¸žà¸±à¸’à¸™à¸²à¸•à¹ˆà¸­à¹‚à¸”à¸¢ Demon Cheats team")
creditTab2:CreateLabel("à¸­à¸±à¸žà¹€à¸”à¸• 31/10/2025")
creditTab2:CreateLabel("Discord: dSyCsRpU62")

-- === à¸¥à¸¹à¸›à¸«à¸¥à¸±à¸ ===
RS.RenderStepped:Connect(function()
    if flying and vv and gyro and hrp and humanoid then
        local cam = workspace.CurrentCamera
        if not cam then return end
        local forward = Vector3.new(cam.CFrame.LookVector.X, 0, cam.CFrame.LookVector.Z).Unit
        local right = Vector3.new(cam.CFrame.RightVector.X, 0, cam.CFrame.RightVector.Z).Unit
        local moveVec = Vector3.zero
        if UIS:IsKeyDown(Enum.KeyCode.W) then moveVec += forward end
        if UIS:IsKeyDown(Enum.KeyCode.S) then moveVec -= forward end
        if UIS:IsKeyDown(Enum.KeyCode.A) then moveVec -= right end
        if UIS:IsKeyDown(Enum.KeyCode.D) then moveVec += right end
        if UIS:IsKeyDown(Enum.KeyCode.Space) then moveVec += Vector3.new(0,1,0) end
        if UIS:IsKeyDown(Enum.KeyCode.LeftShift) then moveVec += Vector3.new(0,-1,0) end
        if moveVec.Magnitude > 0 then vv.Velocity = moveVec.Unit * flySpeed else vv.Velocity = Vector3.zero end
        if moveVec.X ~= 0 or moveVec.Z ~= 0 then
            gyro.CFrame = CFrame.new(hrp.Position, hrp.Position + Vector3.new(moveVec.X, 0, moveVec.Z))
        end
    end
end)

RS.Stepped:Connect(function()
    if noclipEnabled and char then
        for _,part in pairs(char:GetDescendants()) do
            if part:IsA("BasePart") then part.CanCollide = false end
        end
    end
end)

UIS.JumpRequest:Connect(function()
    if infJumpEnabled and humanoid then
        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)

-- à¸£à¸µà¹€à¸‹à¹‡à¸•à¹€à¸¡à¸·à¹ˆà¸­ respawn
player.CharacterAdded:Connect(function(c)
    char = c
    hrp = c:WaitForChild("HumanoidRootPart")
    humanoid = c:WaitForChild("Humanoid")
    stopFlying()
    toggleSpeed(false)
    noclipEnabled = false
    infJumpEnabled = false
    Rayfield:LoadConfiguration()
end)

Rayfield:Notify({Title="Load Successful!", Content="Let's Fun with Demon Cheats!", Duration=4, Image=6026568198})
